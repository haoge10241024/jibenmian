# 期货库存分析系统 - Streamlit版

## 🚀 功能特色

### 📊 **三种分析模式**
1. **全品种分析** - 一键分析所有期货品种
2. **自定义品种分析** - 选择特定品种进行分析
3. **单品种详细分析** - 深度分析单个品种

### 🎯 **核心功能**
- **实时数据获取** - 通过akshare接口获取最新库存数据
- **智能趋势识别** - 自动识别累库、去库、稳定三种趋势
- **交互式图表** - 使用Plotly创建可交互的专业图表
- **多维度分析** - 变化率、信号强度、趋势强度等多项指标
- **数据缓存** - 1小时数据缓存，提升用户体验
- **结果下载** - 支持CSV格式结果下载

### 📈 **专业指标**
- **变化率** - 30天库存变化百分比
- **信号强度** - 基于动态阈值的信号可靠性
- **趋势强度** - 基于ADX思想的趋势持续性
- **库存周转率** - 库存流动性指标
- **季节性因子** - 考虑品种特性的季节性调整

## 🛠️ 安装和运行

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 运行应用
```bash
streamlit run streamlit_futures_app.py
```

### 3. 访问应用
浏览器会自动打开 `http://localhost:8501`

## 📱 使用指南

### 侧边栏配置
1. **选择分析模式**
   - 全品种分析：分析所有61个期货品种
   - 自定义品种分析：选择特定品种
   - 单品种详细分析：深度分析单个品种

2. **调整分析参数**
   - 置信水平：统计分析的置信度（默认95%）
   - 变化率阈值：趋势判断的敏感度（默认10%）
   - 趋势强度阈值：趋势确认的严格度（默认0.3）

3. **点击开始分析**

### 结果展示
1. **汇总统计** - 总品种数、累库/去库/稳定品种数量
2. **汇总图表** - 趋势分布饼图、信号强度分布直方图
3. **详细结果表格** - 可筛选的完整分析结果
4. **重点关注品种** - TOP5累库和去库品种
5. **单品种详细分析** - 交互式图表和关键指标

## 🎨 界面特色

### 响应式设计
- 宽屏布局，充分利用屏幕空间
- 自适应列布局
- 移动端友好

### 交互式图表
- **Plotly图表** - 支持缩放、平移、悬停显示
- **双轴显示** - 库存趋势和增减量同时展示
- **颜色编码** - 绿色表示增加，红色表示减少

### 实时反馈
- 进度条显示数据获取进度
- 状态提示信息
- 错误处理和警告提示

## 📊 技术架构

### 前端框架
- **Streamlit** - Python Web应用框架
- **Plotly** - 交互式图表库
- **Bootstrap** - 响应式CSS框架

### 数据处理
- **Pandas** - 数据处理和分析
- **NumPy** - 数值计算
- **SciPy** - 统计分析

### 数据源
- **AKShare** - 期货库存数据接口
- **实时更新** - 每次分析获取最新数据

## 🔧 高级功能

### 数据缓存
- 使用`@st.cache_data`装饰器
- 1小时TTL，平衡数据新鲜度和性能
- 自动缓存清理

### 错误处理
- 网络异常处理
- 数据质量检查
- 用户友好的错误提示

### 性能优化
- 异步数据获取
- 进度显示
- 内存优化

## 📋 支持的期货品种

### 工业品 (12个)
螺纹钢、热卷、铁矿石、焦煤、焦炭、不锈钢、沪铜、沪铝、沪锌、沪铅、沪镍、沪锡

### 农产品 (12个)
豆一、豆二、豆粕、豆油、玉米、玉米淀粉、菜粕、菜油、棕榈、白糖、棉花、苹果

### 能源化工 (11个)
原油、燃油、沥青、PTA、甲醇、乙二醇、PVC、PP、塑料、橡胶、20号胶

### 其他品种 (26个)
包括贵金属、新兴品种等

## 🚨 注意事项

1. **网络要求** - 需要稳定的网络连接获取实时数据
2. **数据延迟** - 数据可能有1-2天的延迟
3. **分析时间** - 全品种分析需要3-5分钟
4. **浏览器兼容** - 推荐使用Chrome、Firefox、Safari

## 🆘 常见问题

### Q: 数据获取失败怎么办？
A: 检查网络连接，稍后重试，或选择较少的品种进行分析

### Q: 分析结果如何解读？
A: 
- 累库：库存增加趋势，可能价格承压
- 去库：库存减少趋势，可能价格支撑
- 稳定：库存变化不明显

### Q: 如何调整分析参数？
A: 在侧边栏调整置信水平、变化率阈值等参数，重新分析

## 📞 技术支持

如有问题或建议，请联系开发团队。 